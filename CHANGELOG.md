# 변경 사항

## 0.3.0 (2021-11-10)

### 전체

#### 새로운 특징

- `layout` 모듈

  - **`xingapi-res` 크레이트를 `layout` 모듈로 이동합니다.**
  - `TrType`의 enum variants의 이름을 변경합니다.
  - `TrLayout`의 필드 이름을 일부 변경하고 `key` 및 `group` 필드를 제거합니다.
  - `regex` 의존성을 제거하고 정규 표현식에 의한 오버헤드를 개선합니다.
  - `load_dir()`에 스레드 풀을 사용하여 SSD에 최적화합니다.

- `data` 모듈

  - `Data`에 `code`를 `tr_code`로 이름을 변경합니다.
  - `Block`에 `#[serde(untagged)]` 속성을 추가합니다.
  - `DecodeError` 및 `EncodeError`의 정의를 일부 변경합니다.

#### 버그 수정

- EUC-KR 문자열을 디코딩할 때 BOM 핸들링을 하지 않도록 합니다.
- `TrLayout`으로 파싱할 때 구분자 사이에 데이터가 비어있는 경우 잘못 파싱하는
  문제를 해결합니다.

### 윈도우 전용

#### 새로운 특징

- **API 초기화 및 호출 구조를 변경합니다.** `XingApi` 객체는 제거되며 별도의
  함수와 `loader` 모듈로 대체됩니다.

- **이제 TR 레이아웃은 직접 관리합니다.** `request()`에서 TR 코드 대신 TR
  레이아웃을 인자로 받으며, `RealEvent`에 TR 레이아웃을 추가 및 제거하는
  메서드를 추가합니다.

- 이벤트 기반으로 TR을 수신하는 객체의 이름 뒤에 `Event`를 붙입니다. `Real`의
  경우 `RealEvent`로 이름을 변경합니다.

#### 버그 수정

- `Executor`의 내부 스레드에서 호출 요청을 수신할 때 비동기 채널 대신 윈도우
  메시지를 사용하여 busy waiting을 해결합니다.
